<!DOCTYPE html>
<html>
<head>
    <title>{{ tx('Rejestracja','Register') }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/static/icons/icon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.webmanifest">
    <meta name="theme-color" content="#0f172a">
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body class="auth-page">
    <div class="container auth-container">
        <div class="card auth-card">
            <div class="header-actions">
                                {% include "_theme_toggle.html" %}
            </div>
            <h1 class="page-title">üßæ {{ tx('Rejestracja','Register') }}</h1>

            {% with messages = get_flashed_messages() %}
              {% if messages %}
                {% for m in messages %}
                  <div class="flash info">{{ m }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <div class="info-box">
                <div class="info-title">üì¶ {{ tx('Masz ZIP ze Stravy lub Garmina? (opcjonalnie)','Have a Strava or Garmin ZIP? (optional)') }}</div>
                <ol class="info-list">
                    <li>{{ tx('Strava: wejd≈∫ na','Strava: go to') }} <code>strava.com/account</code> {{ tx('i popro≈õ o archiwum.','and request your archive.') }}</li>
                    <li>{{ tx('Garmin: Garmin Connect ‚Üí Ustawienia konta ‚Üí Export Data.','Garmin: Garmin Connect -> Account Settings -> Export Data.') }}</li>
                    <li>{{ tx('Gdy dostaniesz ZIP, dodaj go poni≈ºej. Typ zostanie wykryty automatycznie.','When you get the ZIP, upload it below. Type is detected automatically.') }}</li>
                </ol>
                <div class="help-text">
                    {{ tx('Mo≈ºesz pominƒÖƒá ten krok i dodaƒá ZIP p√≥≈∫niej w Profilu. Obs≈Çugiwane: Strava i Garmin Connect export.','You can skip this and import ZIP later from Profile. Supported: Strava and Garmin Connect export.') }}
                </div>
            </div>

            <form method="POST" action="/register" enctype="multipart/form-data">
                <div class="field">
                    <label>{{ tx('Jƒôzyk aplikacji','App language') }}</label>
                    <select name="preferred_lang" required>
                        <option value="pl" {% if lang != 'en' %}selected{% endif %}>Polski</option>
                        <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
                    </select>
                </div>

                <div class="field">
                    <label>{{ tx('Jakie sporty chcesz mieƒá w celach tygodnia?','Which sports do you want in weekly goals?') }}</label>
                    <div class="sport-pick-grid">
                        {% for sport in target_sport_keys %}
                            <label class="sport-pick-item">
                                <input type="checkbox" name="weekly_focus_sports" value="{{ sport }}" {% if sport in focus_sports %}checked{% endif %}>
                                <span>{{ activity_label(sport) }}</span>
                            </label>
                        {% endfor %}
                    </div>
                    <div class="help-text">{{ tx('To ustawienie mo≈ºesz zmieniƒá p√≥≈∫niej w profilu.','You can change this later in profile.') }}</div>
                </div>

                <div class="form-row">
                    <div class="field">
                        <label>{{ tx('Imiƒô','First name') }}</label>
                        <input type="text" name="first_name">
                    </div>
                    <div class="field">
                        <label>{{ tx('Nazwisko','Last name') }}</label>
                        <input type="text" name="last_name">
                    </div>
                </div>

                <div class="field">
                    <label>{{ tx('Email','Email') }}</label>
                    <input type="email" name="email" required>
                </div>

                <div class="field">
                    <label>{{ tx('Has≈Ço','Password') }}</label>
                    <input type="password" name="password" required>
                    <div class="help-text">{{ tx('Minimum 8 znak√≥w zalecane.','Minimum 8 characters recommended.') }}</div>
                </div>

                <div class="field">
                    <label>{{ tx('Archiwum aktywno≈õci (ZIP, opcjonalnie)','Activity archive (ZIP, optional)') }}</label>
                    <input type="file" name="strava_zip" accept=".zip">
                    <div class="help-text">{{ tx('Obs≈Çugiwane ≈∫r√≥d≈Ça: Strava i Garmin Connect. Je≈õli dodasz plik, import wykona siƒô automatycznie.','Supported sources: Strava and Garmin Connect. If provided, import runs automatically.') }}</div>
                </div>

                <div class="actions">
                    <button class="btn" type="submit">{{ tx('Utw√≥rz konto i przejd≈∫ dalej','Create account and continue') }}</button>
                </div>
            </form>

            <a class="link" href="/login">{{ tx('Masz ju≈º konto? Zaloguj siƒô','Already have an account? Sign in') }}</a>
        </div>
    </div>
</body>
</html>
