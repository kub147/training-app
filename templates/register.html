<!DOCTYPE html>
<html>
<head>
    <title>{{ tx('Rejestracja','Register') }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/static/icons/icon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.webmanifest">
    <meta name="theme-color" content="#0f172a">
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body class="auth-page">
    <div class="container auth-container">
        <div class="card auth-card">
            <div class="header-actions">
                                {% include "_theme_toggle.html" %}
            </div>
            <h1 class="page-title">ðŸ§¾ {{ tx('Rejestracja','Register') }}</h1>

            {% with messages = get_flashed_messages() %}
              {% if messages %}
                {% for m in messages %}
                  <div class="flash info">{{ m }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <div class="info-box">
                <div class="info-title">ðŸ“¦ {{ tx('Masz ZIP ze Stravy? (opcjonalnie)','Have a Strava ZIP? (optional)') }}</div>
                <ol class="info-list">
                    <li>{{ tx('WejdÅº na ustawienia konta:','Go to account settings:') }} <code>strava.com/account</code></li>
                    <li>{{ tx('PrzejdÅº do sekcji pobierania danych i wybierz','Go to data export and select') }} <b>{{ tx('Request your archive','Request your archive') }}</b></li>
                    <li>{{ tx('Strava wyÅ›le link do ZIP-a na email. Pobierz ZIP i dodaj go poniÅ¼ej.','Strava will email you a ZIP link. Download it and upload below.') }}</li>
                </ol>
                <div class="help-text">
                    {{ tx('MoÅ¼esz pominÄ…Ä‡ ten krok i dodaÄ‡ ZIP pÃ³Åºniej w Profilu.','You can skip this and import ZIP later from Profile.') }}
                </div>
            </div>

            <form method="POST" action="/register" enctype="multipart/form-data">
                <div class="field">
                    <label>{{ tx('JÄ™zyk aplikacji','App language') }}</label>
                    <select name="preferred_lang" required>
                        <option value="pl" {% if lang != 'en' %}selected{% endif %}>Polski</option>
                        <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="field">
                        <label>{{ tx('ImiÄ™','First name') }}</label>
                        <input type="text" name="first_name">
                    </div>
                    <div class="field">
                        <label>{{ tx('Nazwisko','Last name') }}</label>
                        <input type="text" name="last_name">
                    </div>
                </div>

                <div class="field">
                    <label>{{ tx('Email','Email') }}</label>
                    <input type="email" name="email" required>
                </div>

                <div class="field">
                    <label>{{ tx('HasÅ‚o','Password') }}</label>
                    <input type="password" name="password" required>
                    <div class="help-text">{{ tx('Minimum 8 znakÃ³w zalecane.','Minimum 8 characters recommended.') }}</div>
                </div>

                <div class="field">
                    <label>{{ tx('Archiwum Strava (ZIP, opcjonalnie)','Strava archive (ZIP, optional)') }}</label>
                    <input type="file" name="strava_zip" accept=".zip">
                    <div class="help-text">{{ tx('Plik typu','File like') }} <code>export_....zip</code>. {{ tx('JeÅ›li dodasz plik, import wykona siÄ™ automatycznie.','If provided, import runs automatically.') }}</div>
                </div>

                <div class="actions">
                    <button class="btn" type="submit">{{ tx('UtwÃ³rz konto i przejdÅº dalej','Create account and continue') }}</button>
                </div>
            </form>

            <a class="link" href="/login">{{ tx('Masz juÅ¼ konto? Zaloguj siÄ™','Already have an account? Sign in') }}</a>
        </div>
    </div>
</body>
</html>
